<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>ksh手動コンスタント</title>
	<link rel="stylesheet" href="style.css"
</head>

<body>
	<h1>Arpusのおもちゃ箱</h1>
	<h2>k-shoot mania Tools</h2>
	<h1>手動コンスタント</h1>
	<p>拍子変化とBPM変化を用いてレーン速度の変化を最小限(±3程度)にします</p>
	<p>譜面完成後、視点変更等も入れた終わってから、仕上げ作業段階での適用を推奨します</p>
	<h3>適用範囲</h3>
	<div id="rangeLine">
		<p>
			<input id="startLine" type="number" value="1">
			小節から
			<input id="endLine" type="number" value="200">
			小節まで
		</p>
	</div>
	<h3>基準となるBPMを入力</h3>
	<p>仕様上、大きな値ほど誤差が小さくなります</p>
	<div id="inputBPM">
		<p>
			基準BPM:
			<input id="standardBPM" type="number" value="200">
		</p>
	</div>
	<div id="inputFile">
		<p id="dropArea">ここにファイルをドロップしてください</p>
	</div>
	<p id="fileName">file name</p>
	<textarea id="textArea" >プレビュー</textarea>
	
	<script>
	// ドロップエリア、テキストエリア、ファイル名表示エリアの要素を取得
	const dropArea = document.getElementById('dropArea');
	const textArea = document.getElementById('textArea');
	const fileNameElement = document.getElementById('fileName');
	
	// ドロップエリアにドラッグオーバーしたときのイベントリスナー
	dropArea.addEventListener('dragover', (event) => {
		event.preventDefault();
		dropArea.classList.add('dragover'); // ドラッグオーバー時のスタイルを適用
	});
	
	// ドロップエリアからドラッグアウトしたときのイベントリスナー
	dropArea.addEventListener('dragleave', () => {
		dropArea.classList.remove('dragover'); // ドラッグオーバー時のスタイルを解除
	});
	
	// ファイルをドロップしたときのイベントリスナー
	dropArea.addEventListener('drop', (event) => {
		event.preventDefault();
		dropArea.classList.remove('dragover');
	
		const file = event.dataTransfer.files[0]; // ドロップされた最初のファイルを取得
		const reader = new FileReader(); // FileReaderオブジェクトを作成
	
		// ファイルを読み込んだ後の処理
		reader.onload = () => {
			textArea.value = reader.result; // テキストエリアに読み込んだ内容を表示
			fileNameElement.textContent = file.name; // ファイル名を表示
		};
	
		// ファイルをテキストとして読み込む
		reader.readAsText(file);
	});
	</script>
	<p>
		<button id="run-button">実行</button>
	</p>
	<script src="script.js"></script>

	<h2>注意:BPM変化は小節線上である必要があります</h2>
	<p>小節内部で変化がある場合、拍子変化を用いて小節を分割し、BPM変化の位置に小節線を置いてください</p>
	<p>手動コンスタント適用後、小節線を消す場合は必ずeditorから拍子変化を用いて小節を結合してください。</p>
	<h3>使用上の注意</h3>
	<p>譜面全体を通して最大で数ms程度のずれが生じることがあります</p>
	<p>BTロング,FXロング,LASERのチェイン数が変化します</p>
	<p>適用後、editorで開き保存すると、192分単位になるので譜面ファイルが重くなります</p>
	<p>適用後、editorで開き保存すると、BTロング,FXロング,LASERの終点が正常に変換されません</p>
	<p>直角LASERは終点の影響で細い直角や通常LASERになることがあります</p>
	<h4>最終更新: 2024/09/09</h4>
	<footer>
		<ul>
			<li><a href="../index.html">back</a></li>
		</ul>
	</footer>
</body>


</html>